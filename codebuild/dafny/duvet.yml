version: 0.2
phases:
  install:
    commands:
      - curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs > rustup.sh
      - chmod a+x rustup.sh
      - ./rustup.sh -v -y
      - export PATH="$HOME/.cargo/bin:$PATH"
      - DIR=$(mktemp -d)
      - git clone https://github.com/awslabs/duvet.git $DIR
      - cargo +stable install --force --path $DIR/
  build:
    commands:
      - ./duvet_report.sh
