version: 0.2

env:
  variables:
    FILE_NAME: "AWS.EncryptionSDK.dll"
   

phases:
  install:
    runtime-versions:
      dotnet: 5.0
      python: 3.x
  build:
    commands:
      - python aws-encryption-sdk-net-formally-verified/codebuild/release/retrieve_signed_assembly.py --target net452 --unique-id $Env:UNIQUE_ID --output .
      # Testing Get-AuthenticodeSignature
      - $sig = Get-AuthenticodeSignature -FilePath ./$Env:FILE_NAME
      - $sig.GetType().FullName
      - Get-Member -InputObject $sig -Force
      - $sig.SignerCertificate
      - $sig.SignatureType
      - $sig.Status
      - $sig.StatusMessage
      - $sig.Path
      - $sig | fl *
